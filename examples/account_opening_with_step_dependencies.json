{
  "name": "account_opening_with_step_dependencies",
  "description": "Account opening workflow - demonstrates workflow dependencies",
  "category": "banking",
  "guidelines": "This workflow demonstrates workflow dependencies. Guide users through the process and explain when workflows are waiting for dependencies.",
  "state_schema": {
    "account_type": {"type": "string", "enum": ["checking", "savings", "business", "joint"], "required": true},
    "full_name": {"type": "string", "required": true},
    "date_of_birth": {"type": "string", "format": "date", "required": true},
    "national_id": {"type": "string", "required": true},
    "email": {"type": "string", "format": "email", "required": true},
    "phone": {"type": "string", "required": true},
    "street": {"type": "string", "required": true},
    "city": {"type": "string", "required": true},
    "state": {"type": "string", "required": true},
    "postal_code": {"type": "string", "required": true},
    "country": {"type": "string", "required": true},
    "id_verified": {"type": "boolean", "required": true},
    "address_verified": {"type": "boolean", "required": true},
    "verification_status": {"type": "string", "enum": ["pending", "approved", "rejected"], "required": true},
    "account_features": {"type": "array", "items": {"type": "string", "enum": ["debit_card", "online_banking", "mobile_app", "overdraft_protection", "checkbook"]}},
    "initial_deposit": {"type": "number", "minimum": 0, "required": true}
  },
  "end_action_type": "api_call",
  "end_action_target": "https://api.bank.com/accounts/open",
  "is_active": true,
  "workflow_metadata": {
    "version": "1.0",
    "estimated_duration_minutes": 15,
    "compliance_required": ["KYC", "AML"],
    "demonstrates": ["workflow_dependencies"]
  }
}
